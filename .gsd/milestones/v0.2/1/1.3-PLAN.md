---
phase: 1
plan: 1.3
wave: 1
---

# Plan 1.3: Basic Rendering & Billboard

## Objective
Implement the visual layer: 3D rendering of the grid map and a "Billboard" sprite system for the 2.5D retro aesthetic.

## Context
- src/store/gameStore.ts (map data)
- src/components/GameCanvas.tsx (rendering context)

## Tasks

<task type="auto">
  <name>Level Renderer Component</name>
  <files>src/components/LevelRenderer.tsx</files>
  <action>
    Create `LevelRenderer` component that subscribes to `useGameStore`.
    Iterate over the `map` array.
    For each cell = 1 (wall):
    - Render a `<Box>` geometry at [x * CELL_SIZE, 0, y * CELL_SIZE].
    - Use efficient instanced rendering (`<InstancedMesh>`) if possible, or simple `<mesh>` for MVP.
    Create a ground plane `<Plane>` spanning the map size.
    Add simple standard materials (grey for walls, brown for floor).
  </action>
  <verify>Browser: Walls appear where the map determines they should be.</verify>
  <done>Map data is visually represented in 3D</done>
</task>

<task type="auto">
  <name>Billboard Sprite Component</name>
  <files>src/components/Billboard.tsx</files>
  <action>
    Create a `Billboard` component that accepts `position` and `textureURL`.
    Render a `<Plane>` with the texture.
    Use `useFrame` to force the mesh interaction to `lookAt(camera.position)` on every frame (classic Doom sprite behavior).
    Alternatively, use R3F's `<Billboard>` from `@react-three/drei` if it matches the desired axis locking behavior (usually lockY is needed for sprites).
  </action>
  <verify>Place a test sprite in the scene. Rotate around it. It should always face the camera.</verify>
  <done>Sprites always face player</done>
</task>

## Success Criteria
- [ ] Walls render according to map layout
- [ ] Sprites maintain face-to-camera orientation
- [ ] Performance is stable (60fps) for simple scene
