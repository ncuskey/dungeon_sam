# Milestone: v0.4 (The Lantern & The Blade)

## Completed: 2026-02-05

## Deliverables
- ✅ **Wall-Anchored Torches**: Point lights are now procedurally anchored to dungeon walls.
- ✅ **Player Glow**: A "lantern" follows the player's camera for constant visibility.
- ✅ **Combat Balancing**: Sword Truth provides significant damage boost (50 vs 25 base).
- ✅ **Item Distribution**: Potions and weapons are procedurally spawned across the dungeon.
- ✅ **Combat Feedback**: Screen shake and hit flashes provide tactile feedback.
- ✅ **Exploration Minimap**: Auto-revealing map with fog-of-war logic in the top-right HUD.

## Phases Completed
1. **Phase 1: Radiance** (Lighting & Atmosphere) — 2026-02-05
2. **Phase 2: Arsenal** (Combat & Items) — 2026-02-05
3. **Phase 3: Impact** (Feedback & Juice) — 2026-02-05
4. **Phase 4: Cartography** (Minimap) — 2026-02-05

## Metrics
- **Total commits**: 5 (Phase 1-4 + Planning)
- **Files changed**: `gameStore.ts`, `DungeonGenerator.ts`, `CameraRig.tsx`, `LevelRenderer.tsx`, `Billboard.tsx`, `EnemyRenderer.tsx`, `SoundManager.ts`, `audioIntegration.ts`, `Minimap.tsx`, `App.tsx`, `TouchControls.tsx`.
- **Duration**: 1 session.

## Lessons Learned
- **Zustand Actions**: Chaining calls to actions within `set` functions (e.g., `state.revealMap`) requires `get()` in the store definition to access the current state's actions reliably.
- **Procedural Logic**: Wall-anchoring logic for lights significantly improves dungeon atmosphere compared to random placement.
- **Audio Feedback**: Simple square/sawtooth sweeps generated via Web Audio API provide high "crunch" and retro feel without external assets.
