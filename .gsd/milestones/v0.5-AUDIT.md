# Milestone Audit: v0.5 "Goblins & Torches"

**Audited:** 2026-02-18

## Summary
| Metric | Value |
|--------|-------|
| Phases | 5 |
| Gap closures | 2 (Torches, Doors) |
| Technical debt items | 0 |

## Must-Haves Status
| Requirement | Verified | Evidence |
|-------------|----------|----------|
| New Goblin enemy type (AI/Stats) | ✅ | [.gsd/phases/5/VERIFICATION.md](file:///Users/nickcuskey/Sam's Game/.gsd/phases/5/VERIFICATION.md) |
| Shield item (Combat/HUD) | ✅ | [.gsd/phases/5/VERIFICATION.md](file:///Users/nickcuskey/Sam's Game/.gsd/phases/5/VERIFICATION.md) |
| Multi-perspective Wall Torches | ✅ | [torch_persp_final_fix_check.webp](file:///Users/nickcuskey/.gemini/antigravity/brain/6d631f17-d8da-4998-ba8b-bee1e62a76c3/torch_persp_final_fix_check_1771465177315.webp) |
| Doors (Parallel to walls) | ✅ | [door_verification_flush.png](file:///Users/nickcuskey/.gemini/antigravity/brain/6d631f17-d8da-4998-ba8b-bee1e62a76c3/door_verification_flush_1771466143058.png) |

## Gap Closures
- **Torch Perspective**: Initially proximity-based, causing assets to "front-on" when the player was close but parallel. Fixed by switching to `camera.getWorldDirection()` alignment.
- **Door Orientation**: Logic was twice inverted due to coordinate system confusion between passage orientation and mesh local rotation. Stabilized with `isEwPassage ? Math.PI / 2 : 0`.

## Concerns
- **Regression Fragility**: The door and torch rotation logic is manual and coordinate-dependent. Future environmental assets (e.g., wall-mounted switches or trapdoors) should use a more standardized "WallAttachment" or "Orientable" helper to prevent similar regressions.

## Recommendations
1. Implement a `useOrientation` or `OrientationHelper` for environmental props.
2. Add a visual test suite for orientation checks at corridor ends and intersections.

## Technical Debt to Address
- [ ] Refactor prop orientation logic in `LevelRenderer.tsx` into reusable helpers.
