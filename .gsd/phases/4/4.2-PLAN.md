---
phase: 4
plan: 2
wave: 2
---

# Plan 4.2: Door Integration

## Objective
Implement door placement in the dungeon generator and render them using the new `door_fit.png` asset.

## Context
- .gsd/SPEC.md
- .gsd/phases/4/RESEARCH.md
- src/utils/dungeonGenerator.ts
- src/components/LevelRenderer.tsx
- src/store/gameStore.ts

## Tasks

<task type="auto">
  <name>Add Doors to Map Generation</name>
  <files>
    /Users/nickcuskey/Sam's Game/src/utils/dungeonGenerator.ts
  </files>
  <action>
    - Define a new cell value for doors (e.g., `2`).
    - Update `createCorridor` or the room painting logic to place value `2` where corridors meet rooms.
  </action>
  <verify>Inspect the generated 'map' array for value 2.</verify>
  <done>Dungeons are generated with door cells at room transitions.</done>
</task>

<task type="auto">
  <name>Render Doors in LevelRenderer</name>
  <files>
    /Users/nickcuskey/Sam's Game/src/components/LevelRenderer.tsx
  </files>
  <action>
    - Detect cell value `2` in `LevelRenderer`.
    - Render a vertical plane mesh (or a thin box) using the `door_fit.png` texture.
    - Orient the door correctly across the corridor opening.
  </action>
  <verify>Visual verification of doors in corridors.</verify>
  <done>Doors are visible in the 3D world at room/corridor junctions.</done>
</task>

<task type="auto">
  <name>Allow Corridor/Door Movement</name>
  <files>
    /Users/nickcuskey/Sam's Game/src/store/gameStore.ts
  </files>
  <action>
    - Update movement validation logic in `gameStore.ts` to allow movement into cells with value `2`.
  </action>
  <verify>Walk through a door successfully.</verify>
  <done>Player can pass through doors.</done>
</task>

## Success Criteria
- [ ] Doors appear at logical transitions in the dungeon.
- [ ] Doors use the `door_fit.png` asset.
- [ ] Player can move through doors.
